# 机器人运动学基础：DH 参数与正逆运动学

运动学是机器人学的核心基础之一。这篇文章梳理了从坐标变换到正逆运动学的完整知识链条。

## 坐标变换

机器人学中，我们需要描述不同部件之间的空间关系。齐次变换矩阵是最常用的工具。

### 齐次变换矩阵

$$
T = \begin{bmatrix} R & p \\ 0 & 1 \end{bmatrix}
$$

其中 R 是 3x3 旋转矩阵，p 是 3x1 平移向量。

## DH 参数法

Denavit-Hartenberg (DH) 参数法是描述串联机器人连杆关系的标准方法。每个关节用 4 个参数描述：

| 参数 | 含义 |
|------|------|
| θ (theta) | 关节角度 |
| d | 连杆偏移 |
| a | 连杆长度 |
| α (alpha) | 连杆扭转角 |

## 正运动学

正运动学就是：已知所有关节角度，求末端执行器的位置和姿态。

```python
import numpy as np

def dh_transform(theta, d, a, alpha):
    """计算单个关节的 DH 变换矩阵"""
    ct, st = np.cos(theta), np.sin(theta)
    ca, sa = np.cos(alpha), np.sin(alpha)
    return np.array([
        [ct, -st*ca,  st*sa, a*ct],
        [st,  ct*ca, -ct*sa, a*st],
        [0,   sa,     ca,    d   ],
        [0,   0,      0,     1   ]
    ])

def forward_kinematics(dh_params, joint_angles):
    """正运动学求解"""
    T = np.eye(4)
    for i, (d, a, alpha) in enumerate(dh_params):
        T = T @ dh_transform(joint_angles[i], d, a, alpha)
    return T
```

## 逆运动学

逆运动学是正运动学的逆问题：已知末端位置和姿态，求关节角度。

> 逆运动学通常没有解析解，需要使用数值方法（如牛顿-拉夫逊法）迭代求解。

### 数值法基本思路

1. 给定初始关节角度猜测值
2. 用正运动学计算当前末端位置
3. 计算位置误差
4. 通过雅可比矩阵计算角度修正量
5. 更新关节角度
6. 重复直到误差足够小

## 总结

运动学是控制机器人运动的数学基础。掌握了正逆运动学，就能让机器人"指哪打哪"。下一步要学习动力学和轨迹规划。
